apiVersion: v1
kind: Namespace
metadata:
  name: kasmcloud-system
---
apiVersion: v1
kind: Service
metadata:
  namespace: kasmcloud-system
  name: kasmcloud-webhook
spec:
  ports:
    - port: 443
      protocol: TCP
      targetPort: 9443
  selector:
    app: kasmcloud-webhook
---
apiVersion: apps/v1
kind: Deployment
metadata:
  name: kasmcloud-webhook
  namespace: kasmcloud-system
spec:
  replicas: 1
  selector:
    matchLabels:
      app: kasmcloud-webhook
  template:
    metadata:
      labels:
        app: kasmcloud-webhook
    spec:
      containers:
      - name: manager
        image: ghcr.io/iceber/kasmcloud/webhook:v0.0.2
        ports:
        - containerPort: 9443
          name: webhook-server
          protocol: TCP
        volumeMounts:
        - mountPath: /tmp/k8s-webhook-server/serving-certs
          name: cert
          readOnly: true
      volumes:
      - name: cert
        secret:
          defaultMode: 420
          secretName: kasmcloud-webhook-server-cert
---
apiVersion: v1
data:
  ca.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURHVENDQWdHZ0F3SUJBZ0lSQUxQR1RvSnduRjd1MW1BWGx6R25rOHd3RFFZSktvWklodmNOQVFFTEJRQXcKQURBZUZ3MHlNekV5TVRJd09EQTFNak5hRncweU5EQXpNVEV3T0RBMU1qTmFNQUF3Z2dFaU1BMEdDU3FHU0liMwpEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUNXK1Ewc05HQ28wdXkrWHFvc3UrSjJFSHZ3WjkrbG5CZEtHa0hnCjZwbzM5K3NGN0xqN0VkeWVwdUJyRnB1UStBSVhzYkFnT05qRnFaUmx0alRUczVnZituQ25zbThheGZTckc4MSsKdGhZdGF2UnRiR1R0cHFUQXcya2VoWkxnRmVsV250STZJUnowYlJpR2tTNWphY3FTajBYeUMyakd4S2MxOWJ1dgpxcVpSZEk1VXhvRjh0VWp5UkZLeWRBREY4Mzlrb1ZQbE9jNFk0UWZvZENSdFd2aExxRHh6Wll3ZEFFcjBja0w0CkNzdVh2c3RsblEzMmhacEcrdkVJbEk1eHdxdHVlcFRTZXF2N0RwNFpZeTRWYmFQMThzakpPblRpK1FzYXN6dHEKd0p3dzJ6TENyeFpoa0V0M294NWlOdnFlTGVlM0ZuUEI3Q3FLa2QyYzc5MndVN0NOQWdNQkFBR2pnWTB3Z1lvdwpEZ1lEVlIwUEFRSC9CQVFEQWdXZ01Bd0dBMVVkRXdFQi93UUNNQUF3YWdZRFZSMFJBUUgvQkdBd1hvSW1hMkZ6CmJXTnNiM1ZrTFhkbFltaHZiMnN1YTJGemJXTnNiM1ZrTFhONWMzUmxiUzV6ZG1PQ05HdGhjMjFqYkc5MVpDMTMKWldKb2IyOXJMbXRoYzIxamJHOTFaQzF6ZVhOMFpXMHVjM1pqTG1Oc2RYTjBaWEl1Ykc5allXd3dEUVlKS29aSQpodmNOQVFFTEJRQURnZ0VCQUNoNWgrVWxBay9NT0tESEZPRWxwUXV3K21SMHNrUUxoU29PWkRYc1dHTXp2TGZPCjg4NVBMcDdkY1o5SDZJbGs0UVhpNlBhQTQ5aDBLell0azZKVU5LMzlzbTdHQ0Y0eVhqM2Fqb3dNNjAvQWRwVjkKYkd2cHNkb1hWQTEyYWVGWng5WjlNdEZ6V1ZsVGh4STlwVU9TWmcxcy9OL2hGVTVvb1BUTVdyUDRuWnp6MXljWgpSWkVqRTVsTkdVaTNLMTJSSU0ybzZnOVhBMCt2YWhubUk4NXBNSDIyN3pmbE9rb29rV2xtZUFEWjdmdFJOclUyCjBHUmxpOVNONk9KdTlEdW91VTErZEpLSG1Nbys1SUl2TDBpeUkwU1ZadE5CM05qUmJVVkhqV3VPemZVVXdneWQKT0VJbDlYTXA3aWRLSGpmZUpxU0JVT05vRGM5bU1tTDRtNk5tZ0JjPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.crt: LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSURHVENDQWdHZ0F3SUJBZ0lSQUxQR1RvSnduRjd1MW1BWGx6R25rOHd3RFFZSktvWklodmNOQVFFTEJRQXcKQURBZUZ3MHlNekV5TVRJd09EQTFNak5hRncweU5EQXpNVEV3T0RBMU1qTmFNQUF3Z2dFaU1BMEdDU3FHU0liMwpEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUNXK1Ewc05HQ28wdXkrWHFvc3UrSjJFSHZ3WjkrbG5CZEtHa0hnCjZwbzM5K3NGN0xqN0VkeWVwdUJyRnB1UStBSVhzYkFnT05qRnFaUmx0alRUczVnZituQ25zbThheGZTckc4MSsKdGhZdGF2UnRiR1R0cHFUQXcya2VoWkxnRmVsV250STZJUnowYlJpR2tTNWphY3FTajBYeUMyakd4S2MxOWJ1dgpxcVpSZEk1VXhvRjh0VWp5UkZLeWRBREY4Mzlrb1ZQbE9jNFk0UWZvZENSdFd2aExxRHh6Wll3ZEFFcjBja0w0CkNzdVh2c3RsblEzMmhacEcrdkVJbEk1eHdxdHVlcFRTZXF2N0RwNFpZeTRWYmFQMThzakpPblRpK1FzYXN6dHEKd0p3dzJ6TENyeFpoa0V0M294NWlOdnFlTGVlM0ZuUEI3Q3FLa2QyYzc5MndVN0NOQWdNQkFBR2pnWTB3Z1lvdwpEZ1lEVlIwUEFRSC9CQVFEQWdXZ01Bd0dBMVVkRXdFQi93UUNNQUF3YWdZRFZSMFJBUUgvQkdBd1hvSW1hMkZ6CmJXTnNiM1ZrTFhkbFltaHZiMnN1YTJGemJXTnNiM1ZrTFhONWMzUmxiUzV6ZG1PQ05HdGhjMjFqYkc5MVpDMTMKWldKb2IyOXJMbXRoYzIxamJHOTFaQzF6ZVhOMFpXMHVjM1pqTG1Oc2RYTjBaWEl1Ykc5allXd3dEUVlKS29aSQpodmNOQVFFTEJRQURnZ0VCQUNoNWgrVWxBay9NT0tESEZPRWxwUXV3K21SMHNrUUxoU29PWkRYc1dHTXp2TGZPCjg4NVBMcDdkY1o5SDZJbGs0UVhpNlBhQTQ5aDBLell0azZKVU5LMzlzbTdHQ0Y0eVhqM2Fqb3dNNjAvQWRwVjkKYkd2cHNkb1hWQTEyYWVGWng5WjlNdEZ6V1ZsVGh4STlwVU9TWmcxcy9OL2hGVTVvb1BUTVdyUDRuWnp6MXljWgpSWkVqRTVsTkdVaTNLMTJSSU0ybzZnOVhBMCt2YWhubUk4NXBNSDIyN3pmbE9rb29rV2xtZUFEWjdmdFJOclUyCjBHUmxpOVNONk9KdTlEdW91VTErZEpLSG1Nbys1SUl2TDBpeUkwU1ZadE5CM05qUmJVVkhqV3VPemZVVXdneWQKT0VJbDlYTXA3aWRLSGpmZUpxU0JVT05vRGM5bU1tTDRtNk5tZ0JjPQotLS0tLUVORCBDRVJUSUZJQ0FURS0tLS0tCg==
  tls.key: LS0tLS1CRUdJTiBSU0EgUFJJVkFURSBLRVktLS0tLQpNSUlFb2dJQkFBS0NBUUVBbHZrTkxEUmdxTkxzdmw2cUxMdmlkaEI3OEdmZnBad1hTaHBCNE9xYU4vZnJCZXk0Cit4SGNucWJnYXhhYmtQZ0NGN0d3SURqWXhhbVVaYlkwMDdPWUgvcHdwN0p2R3NYMHF4dk5mcllXTFdyMGJXeGsKN2Fha3dNTnBIb1dTNEJYcFZwN1NPaUVjOUcwWWhwRXVZMm5La285RjhndG94c1NuTmZXN3I2cW1VWFNPVk1hQgpmTFZJOGtSU3NuUUF4Zk4vWktGVDVUbk9HT0VINkhRa2JWcjRTNmc4YzJXTUhRQks5SEpDK0FyTGw3N0xaWjBOCjlvV2FSdnJ4Q0pTT2NjS3JibnFVMG5xcit3NmVHV011RlcyajlmTEl5VHAwNHZrTEdyTTdhc0NjTU5zeXdxOFcKWVpCTGQ2TWVZamI2bmkzbnR4Wnp3ZXdxaXBIZG5PL2RzRk93alFJREFRQUJBb0lCQUdUaC9YUnBkNkc0ZUd4cApjNHU2N1FQNTFlZjZjVThIOCtRWGthZ0svSXlqeE0vTHRIeEpIa1NCdkhxeXU3ZHVrbTlrMUExa0R5NWVPQVNUCmNjOTVOaEZBVjZFbnNlaVJHUUp4N0twY1lJdHU2ZkJvdXpTMjQyYlA3V0Z3M29tUStzQmdGcGl6WWRiUFE5RkEKR0dCajQvSjFmTWJWNnVqUHBmQi95VEFFZDJqNzFCY0NaeHhYaEFiMHgxQzNRak5TcWcvY0JFb1Z1MWxTMEVSMApIZFRRSnJET1RNVmpqMmo4S0xUSGRORnhHMXI1M2k3TzVYVHdZajAzVkxSaWx1ZFIrRUJyVldYSHZJMXhXSTJKCkZpMFRCOGVXUHlwNDIwR3JwZGJtQ3dDYmtuKzNqVkkvcUEvOUQzS1pHaGZXOW03ZUFVdEtGL3V5MFNXYXQ4MzAKQXR0TkFGMENnWUVBeER2TnczTUY5Q09YZDUweVp0QnlVY3FnNUR2NU9jMVZ4UCtEUHhFaVdTLzB2andmOTRBSAp1OUJ1ZC9qdkV0VjF2bnE4YmFSWWVLaWxWYXpiQ2h6a3I3ckFTNlZXczFXZ3VxVlpzTjFKM2V5UE1WRnhDOTBECnhlalVjM3ZhWXJSbCtVcWdPYW5RQ1o2MHdNU0QyU1E1M3hYaS85YU5IWUFNOVNLblFUYjJwUjhDZ1lFQXhQUk0KZmlQaHJ3L1prVjIzU3dQM3RYUENQN25YbVpkSkdqRjBWeDRkNHVJZ2gzaXdXK09xVVFUYk8ydlpvYkQrRmFFagp1TEZQVTlqUkwyRGxlWXA1QitCWUo4cDg3RStPaCtNZWJKbGRLdGVFOUZXR2E1a2ZyQUZuaEpmTkZtWVFFNCtXClNZeUcvWWZvSDlKVys5SEp0Y1B5Q2J2YVY5aUlsU2s3L0ZScmFOTUNnWUIrZDhCenoyU3Q1R1pRNjVtNUUyd3AKOUhwZXZad3d1WG9tZlRvYjRqSU40czlMN3puMjY2ZVFUcE56ZEphM3Y2U2p2enhET1dEZldtazczeXhIeHpsSApYQWRrZVVsNFNKNU96QlFTM1hzbXNMZlVaQldFUE11YXVDUjd6UDJCRVp5SzNxS0dwejl4Zzd3Z1pFWkpJb1M5CmxzQjJlOUwwaVR0UW5TWEg3T0ZtcHdLQmdIV1lUOXU0M05WRHAybnVCTFNiaDlrbFpzUFoyR3J5TTBtYVlaWnEKZXZtdWZqR2swOWZwbFJXT3lyOHQ0K0Z3NWlSUDlCNGdiL2JtSy9BWDhLdWpEQ1N4eExEdGE2MUV5eHREZGpUdApWUDF4ZFFiVjBjNkl2S3BjcEV3OHZzMHkzMEp1cHhMKy90Sjl4UkRLNi9pckI3NnBZZWlCNnhvc1JWQ2FNQ0MyCjN2TFZBb0dBS2ZsVUQzV1h5ZjErYndyTDdTWHEwS1lrd3RPZHdWSEpjZzkwYitFejBuV1N2SEFMMUdwdUpsRk0KYm1IcWpOR1VKYjZmcXc1L1FydnB6azloWGxqV1BBUXlkeURUUkZyblc1ODVadHlSRW5tYjBhYzVHY2NjazBDYgpLSENvbWd2WWFVVkNlajVldXNhb3UyNEFtUDlKVEZENDVTNjVSczBsaWZvQUQ2a0lJbGc9Ci0tLS0tRU5EIFJTQSBQUklWQVRFIEtFWS0tLS0tCg==
kind: Secret
metadata:
  name: kasmcloud-webhook-server-cert
  namespace: kasmcloud-system
type: kubernetes.io/tls
